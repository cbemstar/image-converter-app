#!/usr/bin/env node
/**
 * Generate Supabase runtime config from environment variables.
 * This writes js/supabase-config.js which should be ignored by git.
 */
const fs = require('fs');
const path = require('path');

const url = process.env.SUPABASE_URL;
const anonKey = process.env.SUPABASE_ANON_KEY;

if (!url || !anonKey) {
  console.error('Error: SUPABASE_URL and SUPABASE_ANON_KEY must be set.');
  process.exit(1);
}

const config = {
  SUPABASE_URL: url,
  SUPABASE_ANON_KEY: anonKey
};

const content = `// Auto-generated by scripts/generate-supabase-config.js\n` +
  `window.SUPABASE_CONFIG = ${JSON.stringify(config, null, 2)};\n`;

const outputPath = path.join(__dirname, '..', 'js', 'supabase-config.js');
fs.writeFileSync(outputPath, content, 'utf8');
console.log('Generated', outputPath);
